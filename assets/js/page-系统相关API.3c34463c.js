(window.webpackJsonp=window.webpackJsonp||[]).push([[587],{1304:function(t,a,s){"use strict";s.r(a);var n=s(1),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"wx-getsysteminfo-object-object"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wx-getsysteminfo-object-object"}},[t._v("#")]),t._v(" wx.getSystemInfo(Object object)")]),t._v(" "),s("p",[t._v("获取系统信息")]),t._v(" "),s("h3",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("p",[t._v("Object object")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必填")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("success")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("接口调用成功的回调函数")])]),t._v(" "),s("tr",[s("td",[t._v("fail")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("接口调用失败的回调函数")])]),t._v(" "),s("tr",[s("td",[t._v("complete")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("接口调用结束的回调函数(调用成功、失败都会执行)")])])])]),t._v(" "),s("h3",{attrs:{id:"object-success-回调函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-success-回调函数"}},[t._v("#")]),t._v(" object.success 回调函数")]),t._v(" "),s("p",[t._v("参数")]),t._v(" "),s("p",[t._v("Object res")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("最低版本")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("brand")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("设备品牌")]),t._v(" "),s("td",[t._v("1.5.0")])]),t._v(" "),s("tr",[s("td",[t._v("model")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("设备型号")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("pixelRatio")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("设备像素比")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("screenWidth")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("屏幕宽度，单位 px")]),t._v(" "),s("td",[t._v("1.1.0")])]),t._v(" "),s("tr",[s("td",[t._v("screenHeight")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("屏幕高度，单位 px")]),t._v(" "),s("td",[t._v("1.1.0")])]),t._v(" "),s("tr",[s("td",[t._v("windowWidth")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("可使用窗口宽度，单位 px")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("windowHeight")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("可使用窗口高度，单位 px")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("statusBarHeight")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("状态栏的高度，单位 px")]),t._v(" "),s("td",[t._v("1.9.0")])]),t._v(" "),s("tr",[s("td",[t._v("language")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("微信设置的语言")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("微信版本号")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("system")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("操作系统及版本")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("platform")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("客户端平台")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("fontSizeSetting")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("用户字体大小(单位 px)。以微信客户端「我-设置-通用-字体大小」中的设置为准")]),t._v(" "),s("td",[t._v("1.5.0")])]),t._v(" "),s("tr",[s("td",[t._v("SDKVersion")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("客户端基础库版本")]),t._v(" "),s("td",[t._v("1.1.0")])]),t._v(" "),s("tr",[s("td",[t._v("benchmarkLevel")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("设备性能等级(仅 Android 小游戏)。"),s("br"),t._v("取值为: -2 或 0(该设备无法运行小游戏)，-1(性能未知)，>=1(设备性能值，该值越高，设备性能越好，目前最高不到 50)")]),t._v(" "),s("td",[t._v("1.8.0")])]),t._v(" "),s("tr",[s("td",[t._v("albumAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信使用相册的开关(仅 iOS 有效)")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("cameraAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信使用摄像头的开关")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("locationAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信使用定位的开关")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("microphoneAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信使用麦克风的开关")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("notificationAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信通知的开关")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("notificationAlertAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信通知带有提醒的开关(仅 iOS 有效)")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("notificationBadgeAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信通知带有标记的开关(仅 iOS 有效)")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("notificationSoundAuthorized")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("允许微信通知带有声音的开关(仅 iOS 有效)")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("bluetoothEnabled")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("蓝牙的系统开关")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("locationEnabled")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("地理位置的系统开关")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("wifiEnabled")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("Wi-Fi 的系统开关")]),t._v(" "),s("td",[t._v("2.6.0")])]),t._v(" "),s("tr",[s("td",[t._v("safeArea")]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("在竖屏正方向下的安全区域")]),t._v(" "),s("td",[t._v("2.7.0")])])])]),t._v(" "),s("h4",{attrs:{id:"res-safearea-的结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#res-safearea-的结构"}},[t._v("#")]),t._v(" res.safeArea 的结构")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("left")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("安全区域左上角横坐标")])]),t._v(" "),s("tr",[s("td",[t._v("right")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("安全区域右下角横坐标")])]),t._v(" "),s("tr",[s("td",[t._v("top")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("安全区域左上角纵坐标")])]),t._v(" "),s("tr",[s("td",[t._v("bottom")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("安全区域右下角纵坐标")])]),t._v(" "),s("tr",[s("td",[t._v("width")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("安全区域的宽度，单位逻辑像素")])]),t._v(" "),s("tr",[s("td",[t._v("height")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("安全区域的高度，单位逻辑像素")])])])]),t._v(" "),s("p",[t._v("示例代码")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSystemInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pixelRatio"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("windowWidth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("windowHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("language"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("platform"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h2",{attrs:{id:"object-wx-getsysteminfosync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-wx-getsysteminfosync"}},[t._v("#")]),t._v(" Object wx.getSystemInfoSync()")]),t._v(" "),s("p",[s("code",[t._v("wx.getSystemInfo")]),t._v(" 的同步版本")]),t._v(" "),s("p",[t._v("直接返回异步版本的 "),s("code",[t._v("res")])]),t._v(" "),s("p",[t._v("示例代码")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSystemInfoSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pixelRatio"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("windowWidth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("windowHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("language"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("platform"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do something when catch error")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h2",{attrs:{id:"updatemanager-wx-getupdatemanager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatemanager-wx-getupdatemanager"}},[t._v("#")]),t._v(" UpdateManager wx.getUpdateManager()")]),t._v(" "),s("p",[t._v("获取全局唯一的版本更新管理器，用于管理小程序更新。关于小程序的更新机制，可以查看运行机制文档。")]),t._v(" "),s("p",[t._v("返回值: UpdateManager")]),t._v(" "),s("h2",{attrs:{id:"updatemanager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatemanager"}},[t._v("#")]),t._v(" UpdateManager")]),t._v(" "),s("p",[t._v("更新管理器对象，用来管理更新，可通过 "),s("code",[t._v("wx.getUpdateManager")]),t._v(" 接口获取实例。UpdateManager 有多个方法")]),t._v(" "),s("h3",{attrs:{id:"updatemanager-applyupdate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatemanager-applyupdate"}},[t._v("#")]),t._v(" UpdateManager.applyUpdate()")]),t._v(" "),s("p",[t._v("强制小程序重启并使用新版本。在小程序新版本下载完成后(即收到 "),s("code",[t._v("onUpdateReady")]),t._v(" 回调)调用。")]),t._v(" "),s("h3",{attrs:{id:"updatemanager-oncheckforupdate-function-callback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatemanager-oncheckforupdate-function-callback"}},[t._v("#")]),t._v(" UpdateManager.onCheckForUpdate(function callback)")]),t._v(" "),s("p",[t._v("监听向微信后台请求检查更新结果事件。微信在小程序冷启动时自动检查更新，不需由开发者主动触发。")]),t._v(" "),s("p",[t._v("Function callback")]),t._v(" "),s("p",[t._v("向微信后台请求检查更新结果事件的回调函数")]),t._v(" "),s("p",[t._v("参数")]),t._v(" "),s("p",[t._v("Object res")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("hasUpdate")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("是否有新版本")])])])]),t._v(" "),s("h3",{attrs:{id:"updatemanager-onupdateready-function-callback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatemanager-onupdateready-function-callback"}},[t._v("#")]),t._v(" UpdateManager.onUpdateReady(function callback)")]),t._v(" "),s("p",[t._v("监听小程序有版本更新事件。客户端主动触发下载(无需开发者触发)，下载成功后回调")]),t._v(" "),s("h3",{attrs:{id:"updatemanager-onupdatefailed-function-callback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatemanager-onupdatefailed-function-callback"}},[t._v("#")]),t._v(" UpdateManager.onUpdateFailed(function callback)")]),t._v(" "),s("p",[t._v("监听小程序更新失败事件。小程序有新版本，客户端主动触发下载(无需开发者触发)，下载失败(可能是网络原因等)后回调")]),t._v(" "),s("p",[t._v("示例代码")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" updateManager "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUpdateManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nupdateManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCheckForUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求完新版本信息的回调")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hasUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nupdateManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdateReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showModal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"更新提示"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"新版本已经准备好，是否重启应用? "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("confirm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新的版本已经下载好，调用 applyUpdate 应用新版本并重启")]),t._v("\n        updateManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nupdateManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdateFailed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新版本下载失败")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);